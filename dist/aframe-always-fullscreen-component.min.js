!function(e){function t(n){if(i[n])return i[n].exports;var l=i[n]={exports:{},id:n,loaded:!1};return e[n].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");var i=window.innerWidth;AFRAME.registerComponent("always-fullscreen",{schema:{platform:{default:"mobile",oneOf:["mobile","desktop","all"]},debug:{default:!1}},init:function(){if(this.mask=this.mask.bind(this),this.orientationChange=this.orientationChange.bind(this),this.changeFactor=i/document.body.clientWidth,!platform)throw new Error("Platform dependency is not available");"iOS"==platform.os.family&&parseInt(platform.os.version,10)>8||platform.ua.indexOf("like Mac OS X")!=-1?(window.addEventListener("scroll",this.mask),window.addEventListener("orientationchange",this.orientationChange),this.makeTreadmill(),this.makeMask(),this.mask()):("all"===this.data.platform||"mobile"===this.data.platform&&this.el.sceneEl.isMobile||"desktop"===this.data.platform&&!this.el.sceneEl.isMobile)&&this.makeFullscreenMask()},update:function(e){},remove:function(){},makeMask:function(){var e=document.querySelector("#mask");e||(e=document.createElement("div"),e.id="mask",document.body.appendChild(e)),e.style.position="fixed",e.style.zIndex=9999999999,e.style.top=0,e.style.left=0,e.style.display="none",e.style.backgroundColor="#663399"},makeTreadmill:function(){var e=document.querySelector("#treadmill");if(e)throw new Error("There is an existing treadmill element.");e=document.createElement("div"),e.id="treadmill",document.body.appendChild(e),e.style.visibility="hidden",e.style.position="relative",e.style.zIndex=10,e.style.left=0,e.style.width="1px",e.style.height="9999999999999999px"},makeFullscreenMask:function(){var e=document.querySelector("#fullscreenmask");if(e)throw new Error("There is an existing fullscreenmask element.");e=document.createElement("div"),e.id="fullscreenmask",document.body.appendChild(e),e.style.position="fixed",e.style.zIndex=9999999999,e.style.top=0,e.style.left=0,e.style.display="block",e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px",e.style.backgroundColor="#663399",e.addEventListener("click",this.enterFullScreen)},repaintElement:function(e){e.style.webkitTransform="translateZ(0)",e.style.display="none",e.style.display="block"},mask:function(){var e=document.querySelector("#mask");this.isMinimalView()?(e.style.display="none",window.scrollTo(0,0),this.el.style.height=window.innerHeight,this.el.sceneEl.resize()):(e.style.display="block",e.style.width=window.innerWidth+"px",e.style.height=2*window.innerHeight+"px",this.repaintElement(e))},isMinimalView:function(){var e=window.innerHeight,t=Math.ceil(document.body.clientWidth/window.innerWidth*10)/10;return this.data.debug&&(console.log("Initial Client-Width: "+i),console.log("window.innerHeight: "+e),console.log("Zoom: "+t),console.log("Change-Factor: "+this.changeFactor),console.log("Minimal-ViewHeight: "+this.getMinimalViewHeight()),console.log("Minimal-ViewHeight AfterFactor: "+Math.round(this.getMinimalViewHeight()/this.changeFactor))),!(e*t<Math.round(this.getMinimalViewHeight()/this.changeFactor))},getMinimalViewHeight:function(){for(var e=this.getOrientation(),t=[[1619,552,320,568,"iPhone 5, 5S"],[1640,551,375,667,"iPhone 6, 6S, 7"],[1648,551,414,736,"iPhone 6, 6S, 7 Plus"]],i=null,n=0;n<t.length;n++)window.screen.width==t[n][2]&&window.screen.height==t[n][3]&&(i=n);if(!i)throw new Error("Couldn't detect iOS Device!");return"portrait"===e?t[i][0]:t[i][1]},enterFullScreen:function(){var e=document.querySelector("#fullscreenmask");e&&e.parentNode.removeChild(e);var t=window.document,i=t.documentElement,n=i.requestFullscreen||i.mozRequestFullScreen||i.webkitRequestFullScreen||i.msRequestFullscreen;t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement||n.call(i)},getOrientation:function(){return 0===window.orientation||180===window.orientation?"portrait":"landscape"},orientationChange:function(){this.changeFactor=i/document.body.clientWidth,this.mask()}})}]);